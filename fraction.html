<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fractions Practice</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Fractions Practice</h1>
<label for="fraction-year">Choose Year Level:</label>
<select id="fraction-year" onchange="showFractionSection()">
    <option value="3">Fractions Addition & Subtraction (SameDenominator)</option>
    <option value="5">Fractions Addition & Subtraction (Different Denominator)</option>
    <option value="6">Fractions Multiplication & Division</option>
    <option value="7">Percentage</option>
</select>

<!-- Level 3 Section -->
<div class="section" id="level3">
    <h2>Fractions Addition & Subtraction (Same Denominator)</h2>
    <div id="y3-question"></div>
    <input type="number" id="y3-numerator" placeholder="Num"> /
    <input type="number" id="y3-denominator" placeholder="Den">
    <button onclick="checkY3()">Check Answer</button>
    <div class="result" id="y3-result"></div>
    <button onclick="generateY3()">Next Question</button>
</div>

<!-- Level 5 Section -->
<div class="section" id="level5">
    <h2>Fractions Addition & Subtraction (Different Denominator)</h2>
    <div id="y5-question"></div>
    <input type="number" id="y5-numerator" placeholder="Num"> /
    <input type="number" id="y5-denominator" placeholder="Den">
    <button onclick="checkY5()">Check Answer</button>
    <div class="result" id="y5-result"></div>
    <button onclick="generateY5()">Next Question</button>
</div>

<!-- Level 6 Section -->
<div class="section" id="level6">
    <h2>Fractions Multiplication & Division</h2>
    <div id="y6-question"></div>
    <input type="number" id="y6-numerator" placeholder="Num"> /
    <input type="number" id="y6-denominator" placeholder="Den">
    <button onclick="checkY6()">Check Answer</button>
    <div class="result" id="y6-result"></div>
    <button onclick="generateY6()">Next Question</button>
</div>

<!-- Level 7 section -->
<div class="section" id="level7">
    <h2>Percentage</h2>
    <div id="y7-question"></div>
    <input type="number" id="y7-numerator" placeholder="Num">
    <button onclick="checkY7()">Check Answer</button>
    <div class="result" id="y7-result"></div>
    <button onclick="generateY7()">Next Question</button>
</div>

<div id="feedback"></div>
  <div class="score" id="score"></div>
  <div class="final" id="finalScore"></div>

  <br>
  <a href="index.html" class="back-btn">‚¨Ö Back to Topics</a>

<script>
    let questionCount = 0, correctCount = 0, totalQuestions = 5;

    function resetQuiz() {
      questionCount = 0;
      correctCount = 0;
      document.getElementById('score').innerText = "";
      document.getElementById('finalScore').innerText = "";
    }

function showFractionSection() {
    resetQuiz();
    let year = document.getElementById('fraction-year').value;
    document.getElementById('level3').style.display = year === '3' ? 'block' : 'none';
    document.getElementById('level5').style.display = year === '5' ? 'block' : 'none';
    document.getElementById('level6').style.display = year === '6' ? 'block' : 'none';
    document.getElementById('level7').style.display = year === '7' ? 'block' : 'none';
}

// Show only Level 3 by default
showFractionSection();

// Utility function to generate random number
function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// Fractions Addition & Subtraction (SameDenominator) Questions (Same Denominator)
let y3 = {};
function generateY3() {
    if (questionCount >= totalQuestions) {
        document.getElementById('finalScore').innerText =
          `üéâ Quiz Finished! You got ${correctCount} out of ${totalQuestions} correct.`;
        document.getElementById('answer').disabled = true;
        document.getElementById('checkBtn').disabled = true;
        return;
    }

    let denom = randInt(2, 10);
    let a = randInt(1, denom-1);
    let b = randInt(1, denom-1);
    y3 = {a, b, denom};
    let op = Math.random() < 0.5 ? '+' : '-';
    y3.op = op;
    document.getElementById('y3-question').innerText = `Question: ${a}/${denom} ${op} ${b}/${denom}`;
    document.getElementById('y3-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY3() {
    let num = parseInt(document.getElementById('y3-numerator').value);
    let den = parseInt(document.getElementById('y3-denominator').value);
    let correct = y3.op === '+' ? y3.a + y3.b : y3.a - y3.b;
    if (num === correct && den === y3.denom) {
        feedback.innerText = "‚úÖ Correct!";
        feedback.className = "correct";
        correctCount++;
    } else {
        feedback.innerText = `‚ùå Wrong. Correct answer is ${correct}/${y3.denom}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
    document.getElementById('answer').disabled = true;
    document.getElementById('checkBtn').disabled = true;
}

// Fractions Addition & Subtraction (Different Denominator) Questions (Different Denominator)
let y5 = {};
function generateY5() {
    if (questionCount >= totalQuestions) {
        document.getElementById('finalScore').innerText =
          `üéâ Quiz Finished! You got ${correctCount} out of ${totalQuestions} correct.`;
        document.getElementById('answer').disabled = true;
        document.getElementById('checkBtn').disabled = true;
        return;
    }
    let denom1 = randInt(2, 10);
    let denom2 = randInt(2, 10);
    let a = randInt(1, denom1-1);
    let b = randInt(1, denom2-1);
    y5 = {a, b, denom1, denom2};
    let op = Math.random() < 0.5 ? '+' : '-';
    y5.op = op;
    document.getElementById('y5-question').innerText = `Question: ${a}/${denom1} ${op} ${b}/${denom2}`;
    document.getElementById('y5-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY5() {
    let num = parseInt(document.getElementById('y5-numerator').value);
    let den = parseInt(document.getElementById('y5-denominator').value);
    let lcm = y5.denom1 * y5.denom2 / gcd(y5.denom1, y5.denom2);
    let a = y5.a * (lcm / y5.denom1);
    let b = y5.b * (lcm / y5.denom2);
    let correct = y5.op === '+' ? a + b : a - b;
    if (num === correct && den === lcm) {
        feedback.innerText = "‚úÖ Correct!";
        feedback.className = "correct";
        correctCount++;
      } else {
        feedback.innerText = `‚ùå Wrong. Correct answer is ${correct}/${lcm}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
    document.getElementById('answer').disabled = true;
    document.getElementById('checkBtn').disabled = true;
}

// Fractions Multiplication & Division Questions (Multiplication & Division)
let y6 = {};
function generateY6() {
    if (questionCount >= totalQuestions) {
        document.getElementById('finalScore').innerText =
          `üéâ Quiz Finished! You got ${correctCount} out of ${totalQuestions} correct.`;
        document.getElementById('answer').disabled = true;
        document.getElementById('checkBtn').disabled = true;
        return;
    }
    let denom1 = randInt(2, 10);
    let denom2 = randInt(2, 10);
    let a = randInt(1, denom1-1);
    let b = randInt(1, denom2-1);
    let op = Math.random() < 0.5 ? '√ó' : '√∑';
    y6 = {a, b, denom1, denom2, op};
    document.getElementById('y6-question').innerText = `Question: ${a}/${denom1} ${op} ${b}/${denom2}`;
    document.getElementById('y6-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY6() {
    let num = parseInt(document.getElementById('y6-numerator').value);
    let den = parseInt(document.getElementById('y6-denominator').value);
    let correctNum, correctDen;
    if (y6.op === '√ó') {
        correctNum = y6.a * y6.b;
        correctDen = y6.denom1 * y6.denom2;
    } else {
        correctNum = y6.a * y6.denom2;
        correctDen = y6.denom1 * y6.b;
    }
    if (num === correctNum && den === correctDen) {
        feedback.innerText = "‚úÖ Correct!";
        feedback.className = "correct";
        correctCount++;
      } else {
        feedback.innerText = `‚ùå Wrong. Correct answer is ${correctNum}/${correctDen}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
    document.getElementById('answer').disabled = true;
    document.getElementById('checkBtn').disabled = true;
}

function generateY7() {
    if (questionCount >= totalQuestions) {
        document.getElementById('finalScore').innerText =
          `üéâ Quiz Finished! You got ${correctCount} out of ${totalQuestions} correct.`;
        document.getElementById('answer').disabled = true;
        document.getElementById('checkBtn').disabled = true;
        return;
    }
    let percent = randInt(1, 10) * 10;
    let random = randInt(1, 10);
    let base = random * percent;
    y7 = {percent, base};
    document.getElementById('y7-question').innerText = `Question: What is ${percent}% of ${base}?`;
    document.getElementById('y7-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}

function checkY7() {
    let userAnswer = parseInt(document.getElementById('y7-numerator').value);
    let correctAnswer = Math.round(y7.percent / 100 * y7.base);
    if (userAnswer === correctAnswer) {
        feedback.innerText = "‚úÖ Correct!";
        feedback.className = "correct";
        correctCount++;
      } else {
        feedback.innerText = `‚ùå Wrong. Correct answer is ${correctAnswer}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
    document.getElementById('answer').disabled = true;
    document.getElementById('checkBtn').disabled = true;
}

// Greatest Common Divisor
function gcd(a,b) {
    while(b!==0){
        let t=b;
        b=a%b;
        a=t;
    }
    return a;
}

// Generate initial questions
generateY3();
generateY5();
generateY6();
</script>

</body>
</html>
