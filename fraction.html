<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fractions Practice</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Fractions Practice</h1>
<label for="level">Choose Year Level:</label>
<select id="level" onchange="showFractionSection()">
    <option value="3">Fractions Addition & Subtraction (SameDenominator)</option>
    <option value="4">Whole Numbers and fractions Addition & Subtraction</option>
    <option value="5">Fractions Addition & Subtraction (Different Denominator)</option>
    <option value="6">Fractions Multiplication & Division</option>
    <option value="7">Percentage</option>
</select>
<div id="quizActive">
    <!-- Level 3 Section -->
    <div class="section" id="level3">
        <h2>Fractions Addition & Subtraction (Same Denominator)</h2>
        <div id="y3-question"></div>
        <input type="number" id="y3-numerator" placeholder="Num"> /
        <input type="number" id="y3-denominator" placeholder="Den">
        <button onclick="checkY3()">Check Answer</button>
        <div class="result" id="y3-result"></div>
        <button onclick="generateY3()">Next Question</button>
    </div>

    <div class="section" id="level4">
        <h2>Whole Numbers Addition & Subtraction</h2>
        <div id="y4-question"></div>
        <input type="number" id="y4-numerator" placeholder="Num"> /
        <input type="number" id="y4-denominator" placeholder="Den">
        <button onclick="checkY4()">Check Answer</button>
        <div class="result" id="y4-result"></div>
        <button onclick="generateY4()">Next Question</button>
    </div>

    <!-- Level 5 Section -->
    <div class="section" id="level5">
        <h2>Fractions Addition & Subtraction (Different Denominator)</h2>
        <div id="y5-question"></div>
        <input type="number" id="y5-numerator" placeholder="Num"> /
        <input type="number" id="y5-denominator" placeholder="Den">
        <button onclick="checkY5()">Check Answer</button>
        <div class="result" id="y5-result"></div>
        <button onclick="generateY5()">Next Question</button>
    </div>

    <!-- Level 6 Section -->
    <div class="section" id="level6">
        <h2>Fractions Multiplication & Division</h2>
        <div id="y6-question"></div>
        <input type="number" id="y6-numerator" placeholder="Num"> /
        <input type="number" id="y6-denominator" placeholder="Den">
        <button onclick="checkY6()">Check Answer</button>
        <div class="result" id="y6-result"></div>
        <button onclick="generateY6()">Next Question</button>
    </div>

    <!-- Level 7 section -->
    <div class="section" id="level7">
        <h2>Percentage</h2>
        <div id="y7-question"></div>
        <input type="number" id="y7-numerator" placeholder="Num">
        <button onclick="checkY7()">Check Answer</button>
        <div class="result" id="y7-result"></div>
        <button onclick="generateY7()">Next Question</button>
    </div>
</div>
<div id="feedback"></div>
  <div class="score" id="score"></div>
  <div class="final" id="finalScore"></div>
  <div id="timer" style="font-size:18px; margin-top:10px;"></div>
  <div id="points" style="font-size:20px; margin-top:10px; color:#16a085;"></div>
  
  <br>
  <a href="index.html" class="back-btn">⬅ Back to Topics</a>

<script src="scripts.js"></script>
<script>
    let questionCount = 0, correctCount = 0, totalQuestions = 5;
    let timerInterval, elapsedTime = 0;
    let level = 0;

function showFractionSection() {
    resetQuiz();
    level = document.getElementById('level').value;
    document.getElementById('level3').style.display = level === '3' ? 'block' : 'none';
    document.getElementById('level4').style.display = level === '4' ? 'block' : 'none';  
    document.getElementById('level5').style.display = level === '5' ? 'block' : 'none';
    document.getElementById('level6').style.display = level === '6' ? 'block' : 'none';
    document.getElementById('level7').style.display = level === '7' ? 'block' : 'none';
}

// Show only Level 3 by default
showFractionSection();

// Utility function to generate random number
function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// Fractions Addition & Subtraction (SameDenominator) Questions (Same Denominator)
let y3 = {};
function generateY3() {
    handleQuizProgress();
    let denom = randInt(2, 10);
    let a = randInt(1, denom-1);
    let b = randInt(1, denom-1);
    y3 = {a, b, denom};
    let op = Math.random() < 0.5 ? '+' : '-';
    y3.op = op;
    document.getElementById('y3-question').innerText = `Question: ${a}/${denom} ${op} ${b}/${denom}`;
    document.getElementById('y3-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY3() {
    let num = parseInt(document.getElementById('y3-numerator').value);
    let den = parseInt(document.getElementById('y3-denominator').value);
    let correct = y3.op === '+' ? y3.a + y3.b : y3.a - y3.b;
    if (num  * y3.denom === correct * den) {
        feedback.innerText = "✅ Correct!";
        feedback.className = "correct";
        correctCount++;
    } else {
        feedback.innerText = `❌ Wrong. Correct answer is ${correct}/${y3.denom}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
}

// Addition/ subtraction with whole numbers
let y4 = {};
function generateY4() {
    handleQuizProgress();
    let a = randInt(1, 4);
    let b = randInt(1, 7);
    let c = randInt(b, 10);
    y4 = {a, b, c};
    let op = Math.random() < 0.5 ? '+' : '-';
    y4.op = op;
    document.getElementById('y4-question').innerText = `Question: ${a} ${op} ${b}/${c}`;
    document.getElementById('y4-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY4() {
    let num = parseInt(document.getElementById('y4-numerator').value);
    let den = parseInt(document.getElementById('y4-denominator').value);
    let correctNum = y4.op === '+' ? y4.a * y4.c + y4.b : y4.a * y4.c - y4.b;
    let correctDen = y4.c;
    let feedback = document.getElementById('feedback');

    // Accept equivalent fractions
    if (num * correctDen === correctNum * den) {
        feedback.innerText = "✅ Correct!";
        feedback.className = "correct";
        correctCount++;
    } else {
        feedback.innerText = `❌ Wrong. Correct answer is ${correctNum}/${correctDen}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
}

// Fractions Addition & Subtraction (Different Denominator) Questions (Different Denominator)
let y5 = {};
function generateY5() {
    handleQuizProgress();
    let denom1 = randInt(2, 10);
    let denom2 = randInt(2, 10);
    let a = randInt(1, denom1-1);
    let b = randInt(1, denom2-1);
    y5 = {a, b, denom1, denom2};
    let op = Math.random() < 0.5 ? '+' : '-';
    y5.op = op;
    document.getElementById('y5-question').innerText = `Question: ${a}/${denom1} ${op} ${b}/${denom2}`;
    document.getElementById('y5-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY5() {
    let num = parseInt(document.getElementById('y5-numerator').value);
    let den = parseInt(document.getElementById('y5-denominator').value);
    let lcm = y5.denom1 * y5.denom2 / gcd(y5.denom1, y5.denom2);
    let a = y5.a * (lcm / y5.denom1);
    let b = y5.b * (lcm / y5.denom2);
    let correctNum = y5.op === '+' ? a + b : a - b;
    let correctDen = lcm;
    let feedback = document.getElementById('feedback');

    // Accept equivalent fractions
    if (num * correctDen === correctNum * den) {
       feedback.innerText = "✅ Correct!";
        feedback.className = "correct";
        correctCount++;
    } else {
        feedback.innerText = `❌ Wrong. Correct answer is ${correctNum}/${correctDen}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
}

// Fractions Multiplication & Division Questions (Multiplication & Division)
let y6 = {};
function generateY6() {
    handleQuizProgress();
    let denom1 = randInt(2, 10);
    let denom2 = randInt(2, 10);
    let a = randInt(1, denom1-1);
    let b = randInt(1, denom2-1);
    let op = Math.random() < 0.5 ? '×' : '÷';
    y6 = {a, b, denom1, denom2, op};
    document.getElementById('y6-question').innerText = `Question: ${a}/${denom1} ${op} ${b}/${denom2}`;
    document.getElementById('y6-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}
function checkY6() {
    let num = parseInt(document.getElementById('y6-numerator').value);
    let den = parseInt(document.getElementById('y6-denominator').value);
    let correctNum, correctDen;
    if (y6.op === '×') {
        correctNum = y6.a * y6.b;
        correctDen = y6.denom1 * y6.denom2;
    } else {
        correctNum = y6.a * y6.denom2;
        correctDen = y6.denom1 * y6.b;
    }
    if (num * correctDen === correctNum * den) {
        feedback.innerText = "✅ Correct!";
        feedback.className = "correct";
        correctCount++;
      } else {
        feedback.innerText = `❌ Wrong. Correct answer is ${correctNum}/${correctDen}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
}

function generateY7() {
    handleQuizProgress();
    let percent = randInt(1, 10) * 10;
    let random = randInt(1, 10);
    let base = random * percent;
    y7 = {percent, base};
    document.getElementById('y7-question').innerText = `Question: What is ${percent}% of ${base}?`;
    document.getElementById('y7-result').innerText = '';
    document.getElementById('feedback').innerText = "";
}

function checkY7() {
    let userAnswer = parseInt(document.getElementById('y7-numerator').value);
    let correctAnswer = Math.round(y7.percent / 100 * y7.base);
    if (userAnswer === correctAnswer) {
        feedback.innerText = "✅ Correct!";
        feedback.className = "correct";
        correctCount++;
      } else {
        feedback.innerText = `❌ Wrong. Correct answer is ${correctAnswer}`;
        feedback.className = "wrong";
    }
    questionCount++;
    document.getElementById('score').innerText = `Score: ${correctCount}/${questionCount}`;
}

// Greatest Common Divisor
function gcd(a,b) {
    while(b!==0){
        let t=b;
        b=a%b;
        a=t;
    }
    return a;
}

// Generate initial questions
generateY3();
generateY4();
generateY5();
generateY6();
</script>

</body>
</html>
